# Databricks Asset Bundle configuration for LakeStream CEP Builder
# See: https://docs.databricks.com/en/dev-tools/bundles/

bundle:
  name: lakestream-cep-builder

variables:
  workspace_host:
    description: Databricks workspace URL
    default: https://your-workspace.cloud.databricks.com
  warehouse_id:
    description: SQL Warehouse ID for Lakeflow
    default: ""

resources:
  apps:
    lakestream_cep_builder:
      name: lakestream-cep-builder
      source_code_path: .
      description: Visual CEP Pipeline Builder for Databricks - generates Lakeflow SDP and Spark Structured Streaming code
      # App startup defined in app.yml
      permissions:
        - level: CAN_USE
          group_name: users

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: ${var.workspace_host}
  prod:
    mode: production
    workspace:
      host: ${var.workspace_host}
      root_path: /Workspace/Users/me/.bundle/${bundle.name}/${bundle.target}
